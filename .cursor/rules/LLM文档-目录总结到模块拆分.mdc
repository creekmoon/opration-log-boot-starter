---
description: 编写/维护 .cursor/doc/ 下的项目文档——只写已实现(DONE)、面向检索、可验证
globs: .cursor/doc/**/*.md
alwaysApply: false
---

# LLM 文档规范：入口总览 + 模块文档

> **适用场景**：创建或更新 `.cursor/doc/` 下的项目文档时激活。

## 核心原则

1. **只写 DONE**：只记录项目/模块**已经实现**的能力。禁止 TODO / Doing / 计划 / 待优化 / `[ ]` 任务清单。
2. **可验证**：每条 DONE 必须有**证据锚点**（类名 / 路由 / 方法名 / 配置 / 模块目录），写不出锚点就不写。
3. **面向检索**：信息短、稳定、可定位；优先提供关键词、入口类、边界。
4. **不编造不推测**：不确定就不写。禁止"应该 / 可能 / 大概率 / 按经验推测"。

---

## 正反例

- ❌ "已实现 OpenAPI 标准化对外接口、签名鉴权、错误码体系……"
  → 无法定位到代码，属于推测或愿景。
- ✅ "已存在 `OpenApiController`（`/openApi`），含 `POST /openApi/rating`、`GET /openApi/queryQuoteResult`、`POST /openApi/booking`。"
  → 带类名 + 路由，模型可直接搜索验证。

---

## 文档分层（固定两层）

### 一、入口总览 `业务开发总结.md`

定位：**索引页**——全局概览 + 跳转链接，不写细节。控制在 **300 行以内**。

推荐章节：

| # | 章节 | 要点 |
|---|------|------|
| 0 | 一句话定位 | — |
| 1 | 系统边界 | 核心对象 |
| 2 | 业务域总览 | 表格 + `[模块-X](模块-X.md)` 链接 |
| 3 | 主流程 | 每条 1 行，最多 3 条 |
| 4 | 横切关注点 | 并发/锁/缓存/权限等，只列名词 |
| 5 | 代码定位速查 | 只写已确认路径 |
| 6 | 外部集成 | 只列系统名/类型 |
| 7 | 术语表 | 用于检索 |
| 8 | 模块文档清单 | 可点击相对链接 |
| 9 | 最短阅读路径 | 按场景指引到模块文档 |

约束：禁止长类名清单 / 接口枚举 / 字段表 / 代码块——这些下沉到模块文档。

---

### 二、模块文档 `模块-*.md`

定位：某业务域的**已实现能力 + 入口定位**，供模型按需深入代码。

推荐章节：

| # | 章节 | 要点 |
|---|------|------|
| 0 | 模块目标 | 一句话 |
| 1 | 边界 | 包含 / 不包含 |
| 2 | 可检索关键词 | 5–20 个，混合概念词 + 类名 + 路径 + 外部系统名，`/` 分隔 |
| 3 | 已实现能力(DONE) | 每条一句话 + 证据锚点，5–10 条 |
| 4 | 主要入口与关键类 | 3–15 个"从哪里开始读" |
| 5 | 核心流程(可选) | 高层 5–10 步 |
| 6 | 外部依赖 | 只列依赖名，不写接入细节 |
| 7 | 模块协作点 | 触发点 / 输入输出 / 一致性约束 |
| 8 | 常见问题 | 每条给"优先看哪里" |

---

## 命名与链接

- 入口文档固定：`业务开发总结.md`
- 模块文档固定前缀：`模块-`
- 引用一律用相对链接：`[模块-订单中心](模块-订单中心.md)`
